Quiero que generes un sistema RAG completo con la siguiente arquitectura y requisitos:

ğŸ”§ 1. Embeddings

Usa el modelo bge-m3 para generar embeddings.

Los documentos de entrada serÃ¡n archivos .md ubicados en una carpeta del proyecto.

Al generar los embeddings, deben guardarse en SQL Server.

Especificaciones del almacenamiento:

Tabla en SQL Server con este esquema:

Documents
---------
id (INT, PRIMARY KEY)
filename (NVARCHAR(255))
content (NVARCHAR(MAX))
embedding VARBINARY(MAX)


Convierte los embeddings (numpy float32) a VARBINARY(MAX) antes de insertarlos.

ğŸ—„ï¸ 2. Base de Datos SQL Server

Crea el mÃ³dulo para conexiÃ³n usando variables de entorno desde un archivo .env:

Variables necesarias:

DB_HOST=
DB_PORT=
DB_NAME=
DB_USER=
DB_PASSWORD=

DEEPSEEK_API_KEY=


Usa una librerÃ­a estÃ¡ndar como pyodbc o mssql+pyodbc con SQLAlchemy (elige la mejor para ti).

ğŸ§  3. LLM â€“ DeepSeek API

El LLM que responderÃ¡ debe ser DeepSeek usando su API oficial.

Crea un mÃ³dulo que:

lea la API key desde .env

envÃ­e prompts con contexto (documentos obtenidos del RAG)

genere respuestas en formato JSON/Texto

ğŸ” 4. Motor RAG

Estructura un pipeline RAG con estos pasos:

Cargar archivos .md

Limpiar y preprocesar texto

Generar embeddings con bge-m3

Guardar texto + embeddings en SQL Server

Para consultas:

Convertir la pregunta en embedding

Obtener todas las filas de SQL Server

Calcular similitud (cosine similarity) en Python

Seleccionar top-k documentos

Enviar a DeepSeek una instrucciÃ³n tipo RAG:

Usa SOLO esta informaciÃ³n de contexto para responder:
[documentos recuperados]

Pregunta del usuario:
[query]


Retornar la respuesta final limpia.

ğŸ“ 5. Estructura del proyecto que quiero

Quiero un proyecto bien organizado con esta estructura:

rag_system/
â”‚
â”œâ”€â”€ data/
â”‚   â””â”€â”€ docs/         # aquÃ­ van los archivos .md
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ embeddings/
â”‚   â”‚   â””â”€â”€ embedder.py
â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”œâ”€â”€ connection.py
â”‚   â”‚   â””â”€â”€ repository.py
â”‚   â”œâ”€â”€ ingestion/
â”‚   â”‚   â””â”€â”€ ingest_docs.py
â”‚   â”œâ”€â”€ rag/
â”‚   â”‚   â”œâ”€â”€ retriever.py
â”‚   â”‚   â””â”€â”€ rag_pipeline.py
â”‚   â”œâ”€â”€ llm/
â”‚   â”‚   â””â”€â”€ deepseek_client.py
â”‚   â””â”€â”€ main.py
â”‚
â”œâ”€â”€ .env
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md

ğŸ“¦ 6. Requisitos tÃ©cnicos

Incluye un requirements.txt con:

python-dotenv
sentence-transformers
transformers
accelerate
pyodbc
numpy
pandas
requests


Opcional:

sqlalchemy

ğŸ“˜ 7. DocumentaciÃ³n

Incluye un README.md explicando:

InstalaciÃ³n del entorno

ConfiguraciÃ³n del .env

CÃ³mo generar embeddings

CÃ³mo correr el pipeline RAG

Ejemplo de consulta

ğŸ¯ 8. Entregable final

Genera todo el cÃ³digo completo, listo para usar, con:

mÃ³dulos separados

funciones limpias

manejo de errores

comentarios explicativos

consultas a SQL Server

integraciÃ³n correcta con DeepSeek

pipeline RAG funcional
